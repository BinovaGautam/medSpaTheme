<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Surgical Fix Test - PVC-005 Live Preview System</title>
    <style>
        /* Simulate actual theme CSS variables */
        :root {
            --color-primary-navy: #2c3e50;
            --color-primary-teal: #16a085;
            --color-secondary-peach: #f39c12;
            --color-neutral-white: #ffffff;
            --color-soft-cream: #fefcf8;
            --color-charcoal: #2c2c2c;
            --gradient-primary: linear-gradient(135deg, #16a085 0%, #2c3e50 100%);
            --gradient-accent: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
        }

        /* Simulate actual theme classes */
        .professional-header {
            background: var(--gradient-primary);
            padding: 1rem;
            color: var(--color-neutral-white);
            margin-bottom: 2rem;
        }

        .nav-menu {
            display: flex;
            gap: 1rem;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .nav-menu .menu-item a {
            color: var(--color-neutral-white);
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
        }

        .btn-consultation {
            background: var(--gradient-accent);
            color: var(--color-neutral-white);
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin: 1rem 0;
        }

        .site-title {
            color: var(--color-primary-navy);
            font-size: 2rem;
            margin: 1rem 0;
        }

        .test-palette {
            background: #f0f0f0;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .test-palette:hover {
            border-color: var(--color-primary-teal);
        }

        .test-palette.active {
            border-color: var(--color-primary-navy);
            background: #e8f4f8;
        }

        .color-swatch {
            display: inline-block;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            margin-right: 10px;
            border: 2px solid #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .status-indicator {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--color-primary-navy);
            color: var(--color-neutral-white);
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 14px;
            z-index: 1000;
        }

        .test-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }
    </style>
</head>
<body>
    <div class="status-indicator" id="statusIndicator">
        ðŸŽ¨ Surgical Fix Test - Ready for Palette Testing
    </div>

    <!-- Simulate theme header structure -->
    <header class="professional-header">
        <h1 class="site-title">Medical Spa Theme - Surgical Fix Test</h1>
        <nav class="main-navigation">
            <ul class="nav-menu">
                <li class="menu-item"><a href="#">Home</a></li>
                <li class="menu-item"><a href="#">Treatments</a></li>
                <li class="menu-item"><a href="#">About</a></li>
                <li class="menu-item"><a href="#">Contact</a></li>
            </ul>
        </nav>
        <button class="btn-consultation">Book Consultation</button>
    </header>

    <div class="test-content">
        <h2>ðŸ§ª PVC-005 Surgical Fix Verification</h2>
        <p>Click a palette below to test the surgical fix. You should see immediate visual changes to the header, navigation, and buttons.</p>

        <!-- Test Palettes -->
        <div class="test-palette" onclick="testPalette('medical-clean')" data-palette="medical-clean">
            <h3>Medical Clean</h3>
            <div>
                <span class="color-swatch" style="background: #2c5aa0;"></span>
                <span class="color-swatch" style="background: #4a90a4;"></span>
                <span class="color-swatch" style="background: #85c1e0;"></span>
            </div>
            <p>Professional medical blue palette</p>
        </div>

        <div class="test-palette" onclick="testPalette('luxury-spa')" data-palette="luxury-spa">
            <h3>Luxury Spa</h3>
            <div>
                <span class="color-swatch" style="background: #8e44ad;"></span>
                <span class="color-swatch" style="background: #c39bd3;"></span>
                <span class="color-swatch" style="background: #f4ecf7;"></span>
            </div>
            <p>Elegant purple and lavender tones</p>
        </div>

        <div class="test-palette" onclick="testPalette('earth-tones')" data-palette="earth-tones">
            <h3>Earth Tones</h3>
            <div>
                <span class="color-swatch" style="background: #8b4513;"></span>
                <span class="color-swatch" style="background: #deb887;"></span>
                <span class="color-swatch" style="background: #f5deb3;"></span>
            </div>
            <p>Natural earth color palette</p>
        </div>
    </div>

    <script>
        // Simulate the Live Preview System with surgical fix
        class SurgicalFixTest {
            constructor() {
                this.init();
            }

            init() {
                console.log('ðŸŽ¨ Surgical Fix Test System: Initializing...');
                this.updateStatus('System loaded - Ready for testing');
            }

            applyPalette(paletteId, colors) {
                console.log(`ðŸŽ¨ SURGICAL FIX: Applying palette ${paletteId}`);
                this.updateStatus(`Applying ${paletteId} palette...`);

                // Simulate the surgical fix mapping to actual theme variables
                const actualThemeMapping = {
                    'primary': '--color-primary-navy',
                    'secondary': '--color-primary-teal',
                    'accent': '--color-secondary-peach'
                };

                // Apply the colors to actual theme variables
                const root = document.documentElement;
                Object.entries(colors).forEach(([role, color]) => {
                    const themeVar = actualThemeMapping[role];
                    if (themeVar) {
                        root.style.setProperty(themeVar, color);
                        console.log(`ðŸŽ¨ SURGICAL FIX: Mapping ${role} (${color}) -> ${themeVar}`);
                    }
                });

                // Update gradients
                if (colors.primary && colors.accent) {
                    root.style.setProperty('--gradient-primary',
                        `linear-gradient(135deg, ${colors.primary} 0%, ${this.darkenColor(colors.primary, 20)} 100%)`);
                    root.style.setProperty('--gradient-accent',
                        `linear-gradient(135deg, ${colors.accent} 0%, ${this.lightenColor(colors.accent, 10)} 100%)`);
                }

                // Update visual indicators
                document.body.classList.add('live-preview-active');
                this.updateStatus(`âœ… ${paletteId} applied successfully!`);

                // Mark active palette
                document.querySelectorAll('.test-palette').forEach(p => p.classList.remove('active'));
                document.querySelector(`[data-palette="${paletteId}"]`).classList.add('active');
            }

            darkenColor(color, percent) {
                const num = parseInt(color.replace("#", ""), 16);
                const amt = Math.round(2.55 * percent);
                const R = (num >> 16) - amt;
                const G = (num >> 8 & 0x00FF) - amt;
                const B = (num & 0x0000FF) - amt;
                return "#" + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 +
                    (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 +
                    (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);
            }

            lightenColor(color, percent) {
                const num = parseInt(color.replace("#", ""), 16);
                const amt = Math.round(2.55 * percent);
                const R = (num >> 16) + amt;
                const G = (num >> 8 & 0x00FF) + amt;
                const B = (num & 0x0000FF) + amt;
                return "#" + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 +
                    (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 +
                    (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);
            }

            updateStatus(message) {
                const indicator = document.getElementById('statusIndicator');
                indicator.textContent = `ðŸŽ¨ ${message}`;
                console.log(`Status: ${message}`);
            }
        }

        // Initialize test system
        const testSystem = new SurgicalFixTest();

        // Test palette data
        const testPalettes = {
            'medical-clean': {
                primary: '#2c5aa0',
                secondary: '#4a90a4',
                accent: '#85c1e0'
            },
            'luxury-spa': {
                primary: '#8e44ad',
                secondary: '#c39bd3',
                accent: '#f4ecf7'
            },
            'earth-tones': {
                primary: '#8b4513',
                secondary: '#deb887',
                accent: '#f5deb3'
            }
        };

        // Test function
        function testPalette(paletteId) {
            const colors = testPalettes[paletteId];
            if (colors) {
                testSystem.applyPalette(paletteId, colors);
            }
        }

        // Add CSS for preview indicator
        const style = document.createElement('style');
        style.textContent = `
            body.live-preview-active::after {
                content: "ðŸŽ¨ SURGICAL FIX ACTIVE";
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: var(--color-primary-navy);
                color: var(--color-neutral-white);
                padding: 8px 12px;
                border-radius: 4px;
                font-size: 12px;
                z-index: 1000;
                animation: pulse 2s infinite;
                border: 2px solid var(--color-primary-teal);
            }
            @keyframes pulse {
                0%, 100% { opacity: 1; }
                50% { opacity: 0.7; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
